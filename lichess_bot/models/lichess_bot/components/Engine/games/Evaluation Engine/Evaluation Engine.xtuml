// BP 7.1.6 content: ModelClass syschar: 3 persistence-version: 7.1.6

within lichess_bot::components::Engine::games is

	@key_letters("Engine");
	@class_num(3);
	class 'Evaluation Engine' is

		//! TODO Eventually this will be a constant time map between FEN and instances of position that have already been evaluated
		evaluated_positions_map: integer;

		positions_evaluated: integer;

		@dialect("oal");
		@operation_num(4);
		operation dispose() is
			@noparse
			select any positionR4 related by self->Position[R4];
			while not empty positionR4 loop
				unrelate self from positionR4 across R4;
				positionR4.dispose();
				select any positionR4 related by self->Position[R4];
			end while;
			
			select one gameR1 related by self->ActiveGame[R1];
			if not empty gameR1 then
				unrelate self from gameR1 across R1;
				gameR1.dispose();
			end if;
			
			delete object instance self;
			@endnoparse
		end operation;

	end class;

end;
